<!DOCTYPE html>
<html lang="en" data-ui-mode="child">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover, user-scalable=yes" />
  <meta name="theme-color" content="#F56B49" />
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'wasm-unsafe-eval'; style-src 'self' 'unsafe-inline'; img-src 'self' blob: data:; media-src 'self' blob:; font-src 'self' data:; connect-src 'self'; worker-src 'self'; object-src 'none'; base-uri 'self'" />

  <!-- PWA / iPadOS 26.2 Capable -->
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <meta name="apple-touch-fullscreen" content="yes" />
  <meta name="apple-mobile-web-app-title" content="Panda Violin" />

  <!-- Description -->
  <meta name="description"
    content="Learn violin with your Red Panda coach! Fun games, offline practice tools, and reference tones for Emerson." />

  <!-- PWA Assets -->
  <link rel="manifest" href="./manifest.webmanifest" />
  <link rel="apple-touch-icon" sizes="180x180" href="./assets/icons/icon-180.png" />
  <link rel="apple-touch-icon" sizes="167x167" href="./assets/icons/icon-167.png" />
  <link rel="apple-touch-icon" sizes="152x152" href="./assets/icons/icon-152.png" />
  <link rel="apple-touch-icon" sizes="120x120" href="./assets/icons/icon-120.png" />
  <!-- iPadOS Startup Images (Splash Screens) -->
  <link rel="apple-touch-startup-image" href="./assets/icons/icon-512.png"
    media="(device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2)" />
  <link rel="apple-touch-startup-image" href="./assets/icons/icon-512.png"
    media="(device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2)" />
  <link rel="apple-touch-startup-image" href="./assets/icons/icon-512.png"
    media="(device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2)" />
  <link rel="apple-touch-startup-image" href="./assets/icons/icon-512.png"
    media="(device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2)" />
  <link rel="icon" type="image/png" sizes="32x32" href="./assets/icons/favicon-32.png" />

  <title>Panda Violin | Violin Practice Companion</title>
  <link rel="stylesheet" href="./src/styles/app.css" />
</head>

<body>
  <a href="#main-content" class="skip-link">Skip to content</a>
  <!-- Ambient Background -->
  <div class="ambient-bg" aria-hidden="true">
    <div class="glow glow-1"></div>
    <div class="glow glow-2"></div>
    <div class="glow glow-3"></div>
  </div>

  <!-- App Container -->
  <div id="app" class="app-container">
    <header class="app-topbar glass" role="banner">
      <div class="app-topbar-brand">
        <span class="app-topbar-title">Panda Violin</span>
        <span class="app-topbar-subtitle">Today&rsquo;s Practice</span>
        <span class="rt-listening-chip" data-rt-indicator>Mic off</span>
      </div>
      <a href="#view-parent" class="parent-zone-lock" data-parent-lock aria-label="Open Parent Zone">
        <span class="parent-zone-lock-icon" aria-hidden="true">
          <svg viewBox="0 0 24 24" fill="currentColor"><path d="M18 8h-1V6a5 5 0 0 0-10 0v2H6a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Zm-6 9a2 2 0 1 1 0-4 2 2 0 0 1 0 4ZM9 8V6a3 3 0 1 1 6 0v2H9Z"/></svg>
        </span>
        <span class="parent-zone-lock-label">For Grown-Ups</span>
      </a>
    </header>

    <!-- Main Content Area -->
    <main class="main-content" id="main-content" data-initial-view-id="view-home">
      <h1 class="sr-only">Panda Violin</h1>
      <section class="view" id="view-home" aria-label="Home">
        <div class="home-mission glass">
          <div class="home-mission-head">
            <picture>
              <source srcset="./assets/illustrations/mascot-happy.webp" type="image/webp">
              <img src="./assets/illustrations/mascot-happy.png" alt="Happy panda coach" class="home-mascot" decoding="async" loading="eager" fetchpriority="high" width="1024" height="1024">
            </picture>
            <div>
              <p class="home-kicker">Today&apos;s Practice Mission</p>
              <h2 class="home-title">Ready to play, Emerson?</h2>
              <p class="home-subtitle">Start your mission, follow Panda Coach, and collect wins.</p>
            </div>
          </div>

          <div class="mission-stats">
            <div class="mission-stat mission-stat-streak">
              <span class="mission-stat-label">Streak</span>
              <strong class="mission-stat-value"><span data-progress="home-streak">0</span> days</strong>
            </div>
            <div class="mission-stat mission-stat-goal">
              <span class="mission-stat-label">Daily goal</span>
              <strong class="mission-stat-value"><span data-progress="daily-goal-value">15</span> min</strong>
              <div class="goal-progress" data-progress="daily-goal-track" role="progressbar" aria-label="Daily goal progress" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0">
                <div class="goal-fill" data-progress="daily-goal-fill"></div>
              </div>
            </div>
          </div>

          <div class="mission-actions">
            <a class="btn btn-secondary" href="#view-coach" data-continue-practice>Resume</a>
            <button class="btn btn-primary" type="button" data-start-practice>Start My Mission</button>
          </div>

          <div class="mission-meta">
            <span class="mission-chip">Week: <strong data-progress="week-minutes">0</strong> min</span>
            <span class="mission-chip" data-progress="level-label">Level 1</span>
          </div>
        </div>

        <div class="practice-flow-grid">
          <section class="practice-flow-card glass">
            <h3>Now</h3>
            <p>Tune your strings and let Panda Coach listen.</p>
            <div class="practice-flow-actions">
              <button class="btn btn-primary" type="button" data-rt-start>Start Listening</button>
              <a class="btn btn-secondary" href="#view-tuner">Open Tuner</a>
            </div>
            <p class="practice-flow-status" data-rt-status>Mic off</p>
          </section>

          <section class="practice-flow-card glass">
            <h3>Next</h3>
            <p>Play one recommended game with realtime coaching.</p>
            <div class="practice-flow-actions">
              <a class="btn btn-primary" href="#view-games">Open Games</a>
              <a class="btn btn-secondary" href="#view-songs">Open Songs</a>
            </div>
          </section>

          <section class="practice-flow-card glass">
            <h3>Wins</h3>
            <p>Your streak and stars stay here in Practice.</p>
            <div class="practice-flow-actions">
              <a class="btn btn-secondary" href="#view-progress">See Wins</a>
            </div>
          </section>
        </div>

        <div class="home-secondary-grid">
          <a href="#view-games" class="feature-card feature-primary">
            <div class="feature-icon"><svg viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M21 6H3c-1.1 0-2 .9-2 2v8c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm-10 7H9v2H7v-2H5v-2h2V9h2v2h2v2zm4.5 2c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zm4-3c-.83 0-1.5-.67-1.5-1.5S18.67 9 19.5 9s1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"/></svg></div>
            <div class="feature-title">Quick Game</div>
            <p class="feature-copy">One tap and play.</p>
          </a>

          <a href="#view-songs" class="feature-card feature-primary">
            <div class="feature-icon"><svg viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M12 3v10.55c-.59-.34-1.27-.55-2-.55C7.79 13 6 14.79 6 17s1.79 4 4 4 4-1.79 4-4V7h4V3h-6z"/></svg></div>
            <div class="feature-title">Song Time</div>
            <p class="feature-copy">Continue your song.</p>
          </a>
        </div>

        <div class="home-utility-links glass" aria-label="App links">
          <a class="btn btn-ghost" href="#view-settings" data-home-utility="settings">Settings</a>
          <a class="btn btn-ghost" href="#view-help" data-home-utility="help">Help</a>
          <a class="btn btn-ghost" href="#view-privacy" data-home-utility="privacy">Privacy</a>
          <a class="btn btn-ghost" href="#view-about" data-home-utility="about">About</a>
        </div>
      </section>
    </main>

    <!-- Bottom Navigation -->
    <nav class="bottom-nav glass" aria-label="Primary">
      <a href="#view-coach" class="nav-item">
        <span class="nav-icon"><svg viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-3 12H7v-2h10v2zm0-3H7V9h10v2zm0-3H7V6h10v2z"/></svg></span>
        <span class="nav-label">Practice</span>
      </a>
      <a href="#view-games" class="nav-item">
        <span class="nav-icon"><svg viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M21 6H3c-1.1 0-2 .9-2 2v8c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm-10 7H9v2H7v-2H5v-2h2V9h2v2h2v2zm4.5 2c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zm4-3c-.83 0-1.5-.67-1.5-1.5S18.67 9 19.5 9s1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"/></svg></span>
        <span class="nav-label">Games</span>
      </a>
      <a href="#view-songs" class="nav-item">
        <span class="nav-icon"><svg viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M12 3v10.55c-.59-.34-1.27-.55-2-.55C7.79 13 6 14.79 6 17s1.79 4 4 4 4-1.79 4-4V7h4V3h-6z"/></svg></span>
        <span class="nav-label">Songs</span>
      </a>
    </nav>

  </div>

  <!-- Game Complete Modal -->
  <dialog id="game-complete-modal" class="game-complete-dialog" aria-labelledby="game-complete-heading" aria-modal="true">
    <div class="game-complete-inner">
      <div class="game-complete-confetti" aria-hidden="true">
        <span class="confetti-piece" style="left:10%;--fall-delay:0s;--fall-dur:1.6s;--fall-drift:20px;background:#E95639"></span>
        <span class="confetti-piece" style="left:20%;--fall-delay:0.1s;--fall-dur:1.9s;--fall-drift:-15px;background:#F9A93F"></span>
        <span class="confetti-piece" style="left:30%;--fall-delay:0.2s;--fall-dur:1.7s;--fall-drift:30px;background:#4FB69E"></span>
        <span class="confetti-piece" style="left:40%;--fall-delay:0.05s;--fall-dur:2.0s;--fall-drift:-25px;background:#E95639"></span>
        <span class="confetti-piece" style="left:50%;--fall-delay:0.15s;--fall-dur:1.5s;--fall-drift:10px;background:#F9A93F"></span>
        <span class="confetti-piece" style="left:60%;--fall-delay:0.3s;--fall-dur:1.8s;--fall-drift:-20px;background:#4FB69E"></span>
        <span class="confetti-piece" style="left:70%;--fall-delay:0.0s;--fall-dur:2.1s;--fall-drift:25px;background:#E95639"></span>
        <span class="confetti-piece" style="left:80%;--fall-delay:0.25s;--fall-dur:1.6s;--fall-drift:-10px;background:#F9A93F"></span>
        <span class="confetti-piece" style="left:90%;--fall-delay:0.1s;--fall-dur:1.9s;--fall-drift:15px;background:#4FB69E"></span>
        <span class="confetti-piece" style="left:15%;--fall-delay:0.4s;--fall-dur:1.7s;--fall-drift:-30px;background:#E95639"></span>
        <span class="confetti-piece" style="left:55%;--fall-delay:0.35s;--fall-dur:2.0s;--fall-drift:20px;background:#F9A93F"></span>
        <span class="confetti-piece" style="left:75%;--fall-delay:0.2s;--fall-dur:1.5s;--fall-drift:-15px;background:#4FB69E"></span>
      </div>
      <picture>
        <source srcset="./assets/illustrations/mascot-celebrate.webp" type="image/webp">
        <img src="./assets/illustrations/mascot-celebrate.png" alt="" class="game-complete-mascot" width="100" height="100" decoding="async">
      </picture>
      <h2 id="game-complete-heading" class="game-complete-heading">Great job, Emerson!</h2>
      <div class="game-complete-stars" aria-label="Stars earned" id="game-complete-stars">
        <span class="game-complete-star filled" aria-hidden="true">★</span>
        <span class="game-complete-star filled" aria-hidden="true">★</span>
        <span class="game-complete-star filled" aria-hidden="true">★</span>
      </div>
      <div class="game-complete-stats">
        <div class="game-complete-stat">
          <span class="game-complete-stat-value" id="game-complete-score">—</span>
          <span class="game-complete-stat-label">Score</span>
        </div>
        <div class="game-complete-stat">
          <span class="game-complete-stat-value" id="game-complete-accuracy">—</span>
          <span class="game-complete-stat-label">Accuracy</span>
        </div>
      </div>
      <div class="game-complete-actions">
        <button type="button" id="game-complete-play-again" class="btn btn-primary">Play Again</button>
        <a href="#view-games" id="game-complete-back" class="btn btn-secondary">Back to Games</a>
      </div>
    </div>
  </dialog>

    <dialog id="achievement-modal" aria-modal="true" aria-labelledby="achievement-heading">
      <div class="achievement-inner">
        <div class="achievement-confetti" aria-hidden="true">
          <span class="confetti-piece" style="--fall-delay:0s;--fall-dur:1.1s;--fall-drift:-30px;background:#E95639"></span>
          <span class="confetti-piece" style="--fall-delay:0.1s;--fall-dur:1.3s;--fall-drift:20px;background:#F9A93F"></span>
          <span class="confetti-piece" style="--fall-delay:0.2s;--fall-dur:1.0s;--fall-drift:40px;background:#4FB69E"></span>
          <span class="confetti-piece" style="--fall-delay:0.05s;--fall-dur:1.4s;--fall-drift:-50px;background:#FFF9F3"></span>
          <span class="confetti-piece" style="--fall-delay:0.3s;--fall-dur:1.2s;--fall-drift:10px;background:#E95639"></span>
          <span class="confetti-piece" style="--fall-delay:0.15s;--fall-dur:0.9s;--fall-drift:-20px;background:#F9A93F"></span>
          <span class="confetti-piece" style="--fall-delay:0.25s;--fall-dur:1.5s;--fall-drift:60px;background:#4FB69E"></span>
          <span class="confetti-piece" style="--fall-delay:0.4s;--fall-dur:1.1s;--fall-drift:-40px;background:#FFF9F3"></span>
          <span class="confetti-piece" style="--fall-delay:0.35s;--fall-dur:1.3s;--fall-drift:30px;background:#E95639"></span>
          <span class="confetti-piece" style="--fall-delay:0.45s;--fall-dur:1.0s;--fall-drift:-10px;background:#F9A93F"></span>
          <span class="confetti-piece" style="--fall-delay:0.5s;--fall-dur:1.2s;--fall-drift:50px;background:#4FB69E"></span>
          <span class="confetti-piece" style="--fall-delay:0.55s;--fall-dur:1.4s;--fall-drift:-60px;background:#FFF9F3"></span>
        </div>
        <div class="achievement-badge-art" id="achievement-badge-art" role="img" aria-label="">
          <img id="achievement-badge-img" src="" alt="" width="120" height="120" loading="eager">
          <span class="achievement-badge-fallback" id="achievement-badge-fallback" aria-hidden="true"></span>
        </div>
        <h2 id="achievement-heading" class="achievement-heading">New Badge!</h2>
        <p class="achievement-badge-name" id="achievement-badge-name"></p>
        <p class="achievement-cheer">You earned it, Emerson!</p>
        <button id="achievement-yay" class="btn btn-primary achievement-yay">Yay!</button>
      </div>
    </dialog>

  <div class="install-toast glass" id="install-toast" role="status" aria-live="polite" hidden>
    <picture>
      <source srcset="./assets/illustrations/mascot-happy.webp" type="image/webp">
      <img src="./assets/illustrations/mascot-happy.png" alt="" class="install-toast-mascot" loading="lazy" decoding="async" width="64" height="64" />
    </picture>
    <div class="install-toast-body">
      <p class="install-toast-text">Play offline anytime!</p>
      <button class="btn btn-primary btn-sm" type="button" data-install-toast-action>Install</button>
    </div>
    <button class="install-toast-close" type="button" aria-label="Dismiss">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" aria-hidden="true" width="16" height="16"><path d="M18 6L6 18M6 6l12 12"/></svg>
    </button>
  </div>

  <script type="module" src="./src/app.js"></script>
</body>

</html>
