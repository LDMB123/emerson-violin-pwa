<section class="view" id="view-coach" aria-label="Practice Coach">
  <div class="view-header">
    <a href="#view-home" class="back-btn"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M15 18l-6-6 6-6"/></svg>Back</a>
    <h2>Practice Mission</h2>
  </div>

  <div class="coach-layout">
    <div class="coach-card glass">
      <div class="coach-card-header">
        <span class="coach-title-pill">Mission Coach</span>
      </div>
      <div class="coach-hero">
        <picture>
          <source srcset="./assets/illustrations/mascot-focus.webp" type="image/webp">
          <img src="./assets/illustrations/mascot-focus.png" alt="Coach panda" class="coach-mascot" loading="lazy" decoding="async" width="1024" height="1024">
        </picture>
        <div class="coach-bubble" data-progress="coach-speech" aria-live="polite">
          <span class="coach-bubble-text">Let&apos;s tune first, then warm up, then play.</span>
        </div>
      </div>
      <div class="coach-actions">
        <button class="btn btn-secondary" type="button" data-coach-action="retry">Say It Again</button>
        <button class="btn btn-primary" type="button" data-coach-action="next">Next Tip</button>
      </div>
    </div>

    <div class="coach-stepper" data-coach-stepper>
      <button class="coach-step-tab is-active" type="button" data-coach-step-target="tune">1 Tune</button>
      <button class="coach-step-tab" type="button" data-coach-step-target="warmup">2 Warm-up</button>
      <button class="coach-step-tab" type="button" data-coach-step-target="play">3 Play</button>
    </div>

    <section class="coach-step-card glass is-active" data-coach-step-card="tune">
      <h3>Tune</h3>
      <p>Make the strings match the reference tones.</p>
      <a class="btn btn-primary" href="#view-tuner">Open Tuner</a>
      <details class="coach-tips">
        <summary>Show tips</summary>
        <p>Play each open string slowly and listen for a clean ring.</p>
      </details>
    </section>

    <section class="coach-step-card glass" data-coach-step-card="warmup" hidden>
      <h3>Warm-up</h3>
      <p>Pick a timer and play long, slow bows.</p>
      <div class="practice-focus glass">
        <input type="checkbox" id="focus-timer" class="state-checkbox focus-toggle" aria-label="Toggle focus timer">
        <input type="checkbox" id="goal-step-focus-5" class="state-checkbox focus-log" data-minutes="5" data-persist="false" aria-hidden="true" tabindex="-1" hidden>
        <input type="checkbox" id="goal-step-focus-10" class="state-checkbox focus-log" data-minutes="10" data-persist="false" aria-hidden="true" tabindex="-1" hidden>
        <input type="checkbox" id="goal-step-focus-15" class="state-checkbox focus-log" data-minutes="15" data-persist="false" aria-hidden="true" tabindex="-1" hidden>

        <fieldset class="focus-presets">
          <legend class="sr-only">Focus duration</legend>
          <label class="focus-chip">
            <input type="radio" name="focus-duration" id="focus-5" checked>
            <span>5 min</span>
          </label>
          <label class="focus-chip">
            <input type="radio" name="focus-duration" id="focus-10">
            <span>10 min</span>
          </label>
          <label class="focus-chip">
            <input type="radio" name="focus-duration" id="focus-15">
            <span>15 min</span>
          </label>
        </fieldset>

        <div class="focus-ring">
          <div class="focus-meta" aria-hidden="false">
            <span class="focus-duration">Choose a timer and tap Start.</span>
            <span class="focus-status" aria-live="polite">Tap Start to begin</span>
          </div>
        </div>
        <div class="focus-controls">
          <label for="focus-timer" class="btn btn-primary btn-start">Start</label>
          <label for="focus-timer" class="btn btn-secondary btn-stop">Stop</label>
        </div>
      </div>
      <details class="coach-tips">
        <summary>Show tips</summary>
        <p>Keep your shoulders soft and let the bow move in a straight lane.</p>
      </details>
    </section>

    <section class="coach-step-card glass" data-coach-step-card="play" hidden>
      <h3>Play</h3>
      <p>Follow today&apos;s steps. Finish one step at a time.</p>
      <div class="lesson-plan" data-lesson-plan="coach">
        <h3>Today&apos;s Steps</h3>
        <div class="lesson-grid">
          <div class="lesson-item">
            <span class="lesson-label">Focus</span>
            <strong data-lesson="skill">Pitch</strong>
          </div>
          <div class="lesson-item">
            <span class="lesson-label">Game</span>
            <strong data-lesson="game">Pitch Quest</strong>
          </div>
          <div class="lesson-item">
            <span class="lesson-label">Beat</span>
            <strong data-lesson="bpm">90 BPM</strong>
          </div>
          <div class="lesson-item">
            <span class="lesson-label">Time</span>
            <strong data-lesson="total">15 min</strong>
          </div>
        </div>
        <ul class="lesson-steps" data-lesson-steps aria-label="Lesson steps" aria-live="polite"></ul>
        <a class="btn btn-primary" data-lesson="cta" href="#view-games">Start plan</a>
      </div>

      <div class="session-goals glass">
        <h3>Checklist</h3>
        <ol class="game-checklist goal-checklist" data-goal-list>
          <li class="game-check-item" data-goal-item="warmup">
            <input type="checkbox" id="goal-warmup" data-minutes="3">
            <label for="goal-warmup"><span class="note-chip" data-goal-chip>3 min</span> <span data-goal-label>Warm-up open strings</span></label>
          </li>
          <li class="game-check-item" data-goal-item="scale">
            <input type="checkbox" id="goal-scale" data-minutes="4">
            <label for="goal-scale"><span class="note-chip" data-goal-chip>4 min</span> <span data-goal-label>Slow scale focus</span></label>
          </li>
          <li class="game-check-item" data-goal-item="rhythm">
            <input type="checkbox" id="goal-rhythm" data-minutes="3">
            <label for="goal-rhythm"><span class="note-chip" data-goal-chip>3 min</span> <span data-goal-label>Metronome rhythm drill</span></label>
          </li>
          <li class="game-check-item" data-goal-item="ear">
            <input type="checkbox" id="goal-ear" data-minutes="2">
            <label for="goal-ear"><span class="note-chip" data-goal-chip>2 min</span> <span data-goal-label>Match pitches by ear</span></label>
          </li>
          <li class="game-check-item" data-goal-item="song">
            <input type="checkbox" id="goal-song" data-minutes="3">
            <label for="goal-song"><span class="note-chip" data-goal-chip>3 min</span> <span data-goal-label>Play one song slowly</span></label>
          </li>
        </ol>
      </div>
      <a class="btn btn-secondary" href="#view-songs">Open Songs</a>
    </section>
  </div>
</section>
