<section class="view game-view game-ear-trainer" id="view-game-ear-trainer" aria-label="Game: Note Detective">
  <div class="game-header">
    <a href="#view-games" class="back-btn"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"
        stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
        <path d="M15 18l-6-6 6-6" />
      </svg>Exit</a>
    <h2>Note Detective</h2>
    <div class="game-score">Guided Drill</div>
  </div>
  <div class="game-content" id="ear-trainer-content">
    <!-- Full Bleed Background Canvas -->
    <canvas id="ear-trainer-canvas"></canvas>

    <div class="ear-trainer-stage">
      <!-- HUD Top Layer -->
      <div class="game-header">
        <a href="#view-games" class="back-btn"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor"
            stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
            <path d="M15 18l-6-6 6-6" />
          </svg>Exit</a>
        <h2>Note Detective</h2>
        <div class="game-score">Guided Drill</div>
      </div>

      <!-- Mascot Anchored -->
      <picture>
        <source srcset="./assets/illustrations/epic_mascot_listening.png" type="image/png">
        <img src="./assets/illustrations/epic_mascot_listening.png" alt="" class="game-mascot mascot-ear" loading="lazy"
          decoding="async">
      </picture>

      <!-- Floating Interaction Panel -->
      <div class="glass-panel"
        style="width: min(100%, 400px); text-align: center; display: flex; flex-direction: column; gap: var(--space-4);">
        <div class="ear-stats-bar"
          style="display: flex; justify-content: space-between; font-weight: 800; font-size: 1.2rem;">
          <span class="ear-level" data-ear="level" style="color: var(--color-primary);">Level 1</span>
          <span class="ear-lives" data-ear="lives">‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è</span>
        </div>

        <div class="ear-progress" data-ear="progress"
          style="display: flex; gap: 4px; justify-content: center; margin: var(--space-2) 0;">
          <span class="ear-dot" data-step="1"></span><span class="ear-dot" data-step="2"></span><span class="ear-dot"
            data-step="3"></span><span class="ear-dot" data-step="4"></span><span class="ear-dot" data-step="5"></span>
          <span class="ear-dot" data-step="6"></span><span class="ear-dot" data-step="7"></span><span class="ear-dot"
            data-step="8"></span><span class="ear-dot" data-step="9"></span><span class="ear-dot" data-step="10"></span>
        </div>

        <div
          style="display: flex; justify-content: space-between; align-items: center; color: var(--color-text-muted);">
          <div class="ear-question" data-ear="question" aria-live="polite" style="font-weight: 700;">Question 1 of 10
          </div>
          <div class="ear-streak" style="font-weight: 700;">Streak <span data-ear="streak">0</span></div>
        </div>

        <div class="ear-panel"
          style="display: none; justify-content: center; gap: var(--space-2); align-items: center; margin: var(--space-4) 0;">
          <div class="ear-icon" style="font-size: 2rem;">üëÇ</div>
          <button class="btn btn-secondary ear-play" type="button" data-ear="play" style="flex: 1;">Play Sound</button>
        </div>

        <fieldset class="ear-options"
          style="display: flex; gap: var(--space-2); justify-content: center; border: none; padding: 0;">
          <legend class="sr-only">Choose the string you heard</legend>
          <input type="radio" id="ear-choice-g" name="ear-choice" class="ear-choice" data-ear-note="G"
            data-persist="false">
          <label class="ear-option" for="ear-choice-g"
            style="flex: 1; padding: var(--space-3) 0; font-weight: 800; font-size: 1.2rem;">G</label>
          <input type="radio" id="ear-choice-d" name="ear-choice" class="ear-choice" data-ear-note="D"
            data-persist="false">
          <label class="ear-option" for="ear-choice-d"
            style="flex: 1; padding: var(--space-3) 0; font-weight: 800; font-size: 1.2rem;">D</label>
          <input type="radio" id="ear-choice-a" name="ear-choice" class="ear-choice" data-ear-note="A"
            data-persist="false">
          <label class="ear-option" for="ear-choice-a"
            style="flex: 1; padding: var(--space-3) 0; font-weight: 800; font-size: 1.2rem;">A</label>
          <input type="radio" id="ear-choice-e" name="ear-choice" class="ear-choice" data-ear-note="E"
            data-persist="false">
          <label class="ear-option" for="ear-choice-e"
            style="flex: 1; padding: var(--space-3) 0; font-weight: 800; font-size: 1.2rem;">E</label>
        </fieldset>

        <details class="pitch-audio glass" style="margin-top: var(--space-4); text-align: left;">
          <summary class="btn btn-secondary" style="width: 100%;">Reference tones</summary>
          <div class="audio-grid"
            style="display: grid; grid-template-columns: 1fr 1fr; gap: var(--space-2); padding: var(--space-3);">
            <div class="audio-card"><span class="audio-label" id="ear-g-label">G</span><audio controls="" preload="none"
                src="./assets/audio/violin-g3.wav" aria-labelledby="ear-g-label"></audio></div>
            <div class="audio-card"><span class="audio-label" id="ear-d-label">D</span><audio controls="" preload="none"
                src="./assets/audio/violin-d4.wav" aria-labelledby="ear-d-label"></audio></div>
            <div class="audio-card"><span class="audio-label" id="ear-a-label">A</span><audio controls="" preload="none"
                src="./assets/audio/violin-a4.wav" aria-labelledby="ear-a-label"></audio></div>
            <div class="audio-card"><span class="audio-label" id="ear-e-label">E</span><audio controls="" preload="none"
                src="./assets/audio/violin-e5.wav" aria-labelledby="ear-e-label"></audio></div>
          </div>
        </details>
      </div>
    </div>
  </div>
</section>